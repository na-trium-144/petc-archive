<?xml version="1.0" encoding="EUC-JP" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
<head>
	<title>内積・外積の使い方 - プチコンまとめWiki (初代/mkII)</title>
	<link rel="stylesheet" href="../sys/skin/standard-3gou.css" type="text/css" media="screen" charset="Shift_JIS" />
	<link rel="stylesheet" href="../sys/skin/smilebasic.css" type="text/css" media="screen" charset="Shift_JIS" />
	<link rel="stylesheet" href="../sys/skin/standard-petc/colorbox.css" type="text/css" media="screen" charset="Shift_JIS" />
	<!--[if IE]><link rel="stylesheet" href="../sys/skin/smilebasic-ie.css" type="text/css"/><![endif]-->
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
	<script type="text/javascript" src="../sys/skin/standard-petc/wordbreak.js"></script> 
	<script type="text/javascript" src="../sys/skin/standard-petc/jquery.colorbox-min.js"></script> 
	<link rel="alternate" type="application/rss+xml" title="RSS" href="/petc/?cmd=rss" />	<script language="JavaScript">
		$(document).ready(function(){
			$(".ColorBoxYouTube").colorbox({iframe:true, innerWidth:425, innerHeight:344});
		});
	</script>
</head>

<body>

<div id="block-container">

	<div id="block-header">

		<h1><a href="/petc/">プチコンまとめWiki (初代/mkII)</a></h1>

		<h2 id="header-navigation">ナビゲーション</h2>

		<h3 id="header-search">ウィキ</h3>

		<div id="block-topbox">

			<p><strong>ウィキ メニュー</strong>

				&nbsp;:&nbsp;
				<a href="/petc/?cmd=edit&amp;page=Mame%2F%C6%E2%C0%D1%A1%A6%B3%B0%C0%D1%A4%CE%BB%C8%A4%A4%CA%FD">編集</a> -
				<a href="/petc/?cmd=diff&amp;page=Mame%2F%C6%E2%C0%D1%A1%A6%B3%B0%C0%D1%A4%CE%BB%C8%A4%A4%CA%FD">差分</a> -
				<a href="/petc/?plugin=attach&amp;pcmd=upload&amp;page=Mame%2F%C6%E2%C0%D1%A1%A6%B3%B0%C0%D1%A4%CE%BB%C8%A4%A4%CA%FD">添付</a> -
				<a href="/petc/?plugin=newpage&amp;refer=Mame%2F%C6%E2%C0%D1%A1%A6%B3%B0%C0%D1%A4%CE%BB%C8%A4%A4%CA%FD">新規</a> -
				<a href="/petc/?cmd=search">検索</a> -
				<a href="/petc/?cmd=list">一覧</a> -
				<a href="/petc/?RecentChanges">新着</a> -
				<a href="/petc/?Help">ヘルプ</a>
			</p>

		</div>

		<div class="clear"></div>

	</div>

	<div id="block-extra-navi">
		<ul>
			<li><a href="/petc3gou/">プチコン3号</a></li>
			<li id="active">プチコン初代/mkII</li>
		<ul>
	</div>


	<div id="block-body">

		<div id="block-sidemenu">

			<div id="block-sidemenu-container">

<h3 id="content_3_0">メニュー 【mkII】</h3>
<ul><li><a href="/petc/?FrontPage" title="FrontPage (128d)">トップページ</a></li>
<li><a href="/petc/?Mame" title="Mame (38d)">まめちしき</a></li>
<li><a href="/petc/?Memo" title="Memo (534d)">プチコンメモ</a></li>
<li><a href="/petc/?FAQ" title="FAQ (573d)">よくある質問集</a></li>
<li><a href="/petc/?Bug" title="Bug (189d)">既知の不具合</a></li>
<li><a href="/petc/?Sample" title="Sample (325d)">サンプルプログラム集</a></li>
<li><a href="/petc/?Toukou" title="Toukou (129d)">投稿プログラム</a></li>
<li><a href="/petc/?WorksLink" title="WorksLink (129d)">プチコン作品リンク集</a></li>
<li><a href="/petc/?Demand" title="Demand (6d)">プチコンへの要望</a></li>
<li><a href="/petc/?OverFlow" title="OverFlow (11d)">OFコーナー</a></li>
<li><a href="http://jbbs.livedoor.jp/computer/43199/" rel="nofollow">プチコン掲示板</a>
<ul><li><a href="http://jbbs.livedoor.jp/bbs/read.cgi/computer/43199/1314589236/l50" rel="nofollow">総合スレッド</a></li>
<li><a href="http://jbbs.livedoor.jp/bbs/read.cgi/computer/43199/1345877567/l50" rel="nofollow">質問スレッド</a></li>
<li><a href="http://jbbs.livedoor.jp/bbs/read.cgi/computer/43199/1340598492/l50" rel="nofollow">意見/要望スレッド</a></li></ul></li>
<li><a href="/petc/?Chat" title="Chat (13d)">チャットルーム</a></li>
<li><a href="/petc/?Contact" title="Contact (918d)">管理人に連絡</a></li></ul>
<ul><li><a href="http://wiki.hosiken.jp/petc3gou/" rel="nofollow">プチコン3号 まとめWiki</a></li></ul>

<h3 id="content_3_1">ヘルプ</h3>
<ul><li><a href="/petc/?Help" title="Help (128d)">ヘルプ</a></li>
<li><a href="/petc/?SandBox" title="SandBox (3d)">編集の練習用ページ</a></li></ul>

<h3 id="content_3_2">リンク</h3>
<ul><li><a href="http://smileboom.com/special/ptcm2/" rel="nofollow">プチコンmkII 公式サイト</a></li>
<li><a href="http://smileboom.com/special/ptcm2/html_reference.php" rel="nofollow">mkII公式コマンド一覧</a></li>
<li><a href="http://smileboom.com/special/ptcm2/co_manual/p01.php" rel="nofollow">mkII公式説明書</a></li>
<li><a href="http://smileboom.com/special/ptcm2/qrmaker/" rel="nofollow">QR コード変換ツール</a></li>
<li><a href="http://smileboom.com/special/ptcm2/co_konnichiwa/p01.php" rel="nofollow">公式初心者むけ講座</a></li>
<li><a href="http://smileboom.com/special/petitcom/pochette.html" rel="nofollow">公式プログラムリスト集</a></li></ul>
<ul><li><a href="http://smileboom.com/special/petitcom/" rel="nofollow">旧プチコン公式サイト</a></li>
<li><a href="http://smileboom.com/special/petitcom/download.html" rel="nofollow">旧公式説明書</a></li>
<li><a href="http://smileboom.com/special/petitcom/command.html" rel="nofollow">旧公式コマンド一覧</a></li>
<li><a href="http://smileboom.com/special/petitcom/konnichiwa.html" rel="nofollow">旧公式初心者むけ講座</a></li></ul>
<ul><li><a href="http://petitcomputer.wikia.com/wiki/Petit_Computer_Wiki" rel="nofollow">Petit Computer Wiki</a></li></ul>
<ul><li><a href="/petc/?Link" title="Link (33d)">プチコンリンク集</a></li></ul>
<h3>最近の更新</h3><!-- 10 --><div><h4>2015/03/27</h4>
<ul>
 <li><a href="/petc/?Toukou%2F%A5%D3%A5%C3%A5%B0%A5%D6%A5%EA%A5%C3%A5%C2%A4%CE%BB%E0%C6%AE%A1%DAMML%A1%DB" title="Toukou/ビッグブリッヂの死闘【MML】 (15h)">Toukou/ビッグブリッヂの死闘【MML】</a></li>
 <li><a href="/petc/?Toukou%2Fvs%20%A5%AF%A5%EA%A1%BC%A5%D1%A1%BC" title="Toukou/vs クリーパー (18h)">Toukou/vs クリーパー</a></li>
</ul>
<h4>2015/03/25</h4>
<ul>
 <li><a href="/petc/?Toukou%2FGO%21GO%21%A5%B9%A5%A4%A5%AB%B3%E4%A4%EA" title="Toukou/GO!GO!スイカ割り (2d)">Toukou/GO!GO!スイカ割り</a></li>
 <li><a href="/petc/?Toukou%2F%A1%DAMineCraft%A1%DBpiano2.ogg%A1%DAComposed%A1%DB" title="Toukou/【MineCraft】piano2.ogg【Composed】 (2d)">Toukou/【MineCraft】piano2.ogg【Composed】</a></li>
</ul>
<h4>2015/03/24</h4>
<ul>
 <li><a href="/petc/?Toukou%2F%A5%D7%A5%C1%A5%B3%A5%F3TV" title="Toukou/プチコンTV (3d)">Toukou/プチコンTV</a></li>
 <li><a href="/petc/?SandBox" title="SandBox (3d)">SandBox</a></li>
</ul>
<h4>2015/03/23</h4>
<ul>
 <li><a href="/petc/?Toukou%2F%A5%B9%A5%DE%C2%BCDX" title="Toukou/スマ村DX (4d)">Toukou/スマ村DX</a></li>
 <li><a href="/petc/?Toukou%2F%CF%A2%BA%BF%A5%B7%A5%DF%A5%E5%A5%EC%A1%BC%A5%BF%A1%BC" title="Toukou/連鎖シミュレーター (4d)">Toukou/連鎖シミュレーター</a></li>
</ul>
<h4>2015/03/22</h4>
<ul>
 <li><a href="/petc/?Toukou%2F%CA%C9%BC%B0%CC%C2%CF%A9%A5%B2%A1%BC%A5%E0" title="Toukou/壁式迷路ゲーム (5d)">Toukou/壁式迷路ゲーム</a></li>
 <li><a href="/petc/?Toukou%2F%A5%AB%A5%E9%A5%D5%A5%EB%A1%A6%A5%C9%A5%E9%A5%E0" title="Toukou/カラフル・ドラム (5d)">Toukou/カラフル・ドラム</a></li>
</ul>
</div>

<h3 id="content_3_3">オンライン情報</h3>
<p>現在同時に 2 人がこのサイトを見ています</p>

			</div>

		</div>

		<div id="block-body-container" class="with-sidemenu">

			<h2>内積・外積の使い方</h2>

			<div id="block-pankuzu-body">

				<h3 id="header-pankuzu">パンくずリスト</h3>

				<ul id="list-pankuzu">
<li id="list-pankuzu-home"><a href="/petc/">トップ</a></li>
<li><a href="/petc/?Mame">Mame</a></li>
<li id="list-pankuzu-current"><a href="/petc/?Mame%2F%C6%E2%C0%D1%A1%A6%B3%B0%C0%D1%A4%CE%BB%C8%A4%A4%CA%FD">内積・外積の使い方</a></li>				</ul>

			</div>

<div id="body">
<!--  / 0.034sec. -->
<div class="contents">
<ul><li><a href="#w97c3f9e">  内積・外積とは </a></li>
<li><a href="#hc02747a">  計算方法 </a>
<ul><li><a href="#a03ec1f3">  説明上の変数定義 </a></li>
<li><a href="#a9fb7733">  定義 </a></li>
<li><a href="#r5c6a10c">  sin・cosの符号 </a></li></ul></li>
<li><a href="#c58c27ec">  注意事項 </a></li></ul>
</div>

<h3 id="w97c3f9e">内積・外積とは</h3>
<p>内積も外積も高校の数学で習うかもしれない計算方法のことです。(掛け算の仲間です)。
なので、難しく話すといくらでも難しくなりますが、プチコンプログラマにとっては意味は分からなくても高速化できるかもしれない計算テクニックにすぎません。</p>

<h3 id="hc02747a">計算方法</h3>
<p>内積・外積は２つのベクトルの掛け算にあたります。<br />
ベクトルとは長さと向きを持った数のことで、要はX軸方向の値と、Y軸方向の値をまとめて1つの数とみなしたものです。</p>

<h4 id="a03ec1f3">説明上の変数定義</h4>
<p>以下の、変数を使って説明します。</p>
<div class="img_margin" style="text-align:left"><a href="/petc/?plugin=attach&amp;refer=Mame%2F%C6%E2%C0%D1%A1%A6%B3%B0%C0%D1%A4%CE%BB%C8%A4%A4%CA%FD&amp;openfile=VECT.PNG" title="VECT.PNG"><img src="/petc/?plugin=ref&amp;page=Mame%2F%C6%E2%C0%D1%A1%A6%B3%B0%C0%D1%A4%CE%BB%C8%A4%A4%CA%FD&amp;src=VECT.PNG" alt="VECT.PNG" title="VECT.PNG" width="146" height="117" /></a></div>

<div class="table-wrapper"><table class="border"><tbody><tr><th class="style_th">A</th><td class="style_td">掛けられる側のベクトル</td></tr><tr><th class="style_th">B</th><td class="style_td">掛ける側のベクトル</td></tr><tr><th class="style_th">Ax</th><td class="style_td">ベクトルAのX軸方向の長さ</td></tr><tr><th class="style_th">Ay</th><td class="style_td">ベクトルAのY軸方向の長さ</td></tr><tr><th class="style_th">Bx</th><td class="style_td">ベクトルBのX軸方向の長さ</td></tr><tr><th class="style_th">By</th><td class="style_td">ベクトルBのY軸方向の長さ</td></tr><tr><th class="style_th">R</th><td class="style_td">ベクトルBからAへの角度</td></tr></tbody></table></div>

<h4 id="a9fb7733">定義</h4>
<p>以下に内積と外積の定義になります。そして定義からゴチャゴチャした計算をした結果、以下の計算結果になります。</p>
<div class="table-wrapper"><table class="border"><tbody><tr><th class="style_th"></th><th class="style_th">定義</th><th class="style_th">計算結果</th></tr><tr><th class="style_th">内積</th><td class="style_td">&#x7c;A&#x7c;&#x7c;B&#x7c;cos(R)</td><td class="style_td">Ax*Bx + Ay*By</td></tr><tr><th class="style_th">外積</th><td class="style_td">&#x7c;A&#x7c;&#x7c;B&#x7c;sin(R)</td><td class="style_td">Ax*By - Ay*Bx</td></tr></tbody></table></div>
<p>|A|と|B|はベクトルの長さのことです。<br />
cosとsinの詳細が知りたいときは<a href="/petc/?Mame%2F%BB%B0%B3%D1%B4%D8%BF%F4%A4%CE%BB%C8%A4%A4%CA%FD" title="Mame/三角関数の使い方 (131d)">三角関数の使い方</a>をご覧ください。</p>
<p>ここで、この計算で求められた値にどんな意味があるんだろう？とか、考えちゃダメです。<br />
重要なのは定義と計算結果が一致するということです。<br />
|A|と|B|は絶対にプラスの値なので、三角関数と計算結果の符号が一致します。つまり</p>
<div class="table-wrapper"><table class="border"><tbody><tr><th class="style_th">内積</th><td class="style_td">SGN(cos(R)) == SGN(Ax*Bx + Ay*By)</td></tr><tr><th class="style_th">外積</th><td class="style_td">SGN(sin(R)) == SGN(Ax*By - Ay*Bx)</td></tr></tbody></table></div>
<p>が、成り立ちます。
要するに内積を求めるとcosの、外積を求めるとsinの符号が分かるということです。</p>

<h4 id="r5c6a10c">sin・cosの符号</h4>
<p>では、sin・cosの符号が分かると何がうれしいのでしょうか？<br />
それは、角度Rの大まかな値が分かるということです。
sin・cosは角度によってこのように変化します。</p>
<div class="img_margin" style="text-align:left"><a href="/petc/?plugin=attach&amp;refer=Mame%2F%C6%E2%C0%D1%A1%A6%B3%B0%C0%D1%A4%CE%BB%C8%A4%A4%CA%FD&amp;openfile=SINCOS.PNG" title="SINCOS.PNG"><img src="/petc/?plugin=ref&amp;page=Mame%2F%C6%E2%C0%D1%A1%A6%B3%B0%C0%D1%A4%CE%BB%C8%A4%A4%CA%FD&amp;src=SINCOS.PNG" alt="SINCOS.PNG" title="SINCOS.PNG" width="256" height="192" /></a></div>

<p>角度はラジアンで表してあります。ラジアンについても<a href="/petc/?Mame%2F%BB%B0%B3%D1%B4%D8%BF%F4%A4%CE%BB%C8%A4%A4%CA%FD" title="Mame/三角関数の使い方 (131d)">三角関数の使い方</a>をご覧ください。</p>
<p>このようにsin・cosの値はπ/2(90°)単位で変化するので、大まかな前後左右が判断できます。</p>
<div class="table-wrapper"><table class="border"><tbody><tr><th class="style_th" rowspan="2" style="text-align:center;"></th><th class="style_th" colspan="8" style="text-align:center;">Bから見たAの方向</th></tr><tr><th class="style_th" style="text-align:center;">左後</th><th class="style_th" style="text-align:center;">左</th><th class="style_th" style="text-align:center;">左前</th><th class="style_th" style="text-align:center;">前</th><th class="style_th" style="text-align:center;">右前</th><th class="style_th" style="text-align:center;">右</th><th class="style_th" style="text-align:center;">右後</th><th class="style_th" style="text-align:center;">後</th></tr><tr><th class="style_th" style="text-align:center;">内積</th><td class="style_td" style="text-align:center;">-</td><td class="style_td" style="text-align:center;">0</td><td class="style_td" style="text-align:center;">+</td><td class="style_td" style="text-align:center;">+</td><td class="style_td" style="text-align:center;">+</td><td class="style_td" style="text-align:center;">0</td><td class="style_td" style="text-align:center;">-</td><td class="style_td" style="text-align:center;">-</td></tr><tr><th class="style_th" style="text-align:center;">外積</th><td class="style_td" style="text-align:center;">-</td><td class="style_td" style="text-align:center;">-</td><td class="style_td" style="text-align:center;">-</td><td class="style_td" style="text-align:center;">0</td><td class="style_td" style="text-align:center;">+</td><td class="style_td" style="text-align:center;">+</td><td class="style_td" style="text-align:center;">+</td><td class="style_td" style="text-align:center;">0</td></tr></tbody></table></div>

<h3 id="c58c27ec">注意事項</h3>
<ul><li>この説明はプチコン画面のXY上限定での説明をしています。3次元だったりY座標が上を向いていたりすると色々合わない部分が出てきます。</li>
<li>コードの読みやすさは内積・外積を使うよりATANを使ったほうが圧倒的に高いです。速度の問題がない場合はATANを使った方が良いかもしれません。</li>
<li>プチコンの場合、他のプログラム環境と比べると三角関数は比較的速く、四則演算は比較的遅く感じます。単純な計算の場合、まだ内積・外積の方が高速ですが、前後の処理が大きく変わってしまう場合は逆転する可能性もあります。</li></ul>
</div>

		</div>

		<div class="clear"></div>

	</div>

	<div id="block-pukiwiki-info">


		<p id="pukiwiki-about"><strong>PukiWiki 1.4.7</strong> Copyright &copy; 2001-2006 <a href="http://pukiwiki.sourceforge.jp/">PukiWiki Developers Team</a>. License is <a href="http://www.gnu.org/licenses/gpl.html">GPL</a>. Based on "PukiWiki" 1.3 by <a href="http://factage.com/yu-ji/">yu-ji</a><br />
		ページの処理時間 : 0.045 秒  | このページの最終更新 : 2013/12/15 (日) 09:04:58  (467d) | <a href="/petc/?plugin=login">ログイン</a><br />
		Copyright(C) 2011-2014 プチコンまとめWiki ◆1sxkymI8ji30</p>

	</div>

</div>

<script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-2091180-9']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();

</script>

</body>

</html>
