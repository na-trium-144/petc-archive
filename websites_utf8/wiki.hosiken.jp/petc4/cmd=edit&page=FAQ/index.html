<?xml version="1.0" encoding="EUC-JP" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
<head>
	<meta name="robots" content="NOINDEX,NOFOLLOW" />
	<title>FAQ の編集 - プチコン4 まとめWiki</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">	
	<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
	<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css">
	<link rel="stylesheet" href="../sys/skin/pure/forms.css" type="text/css" media="screen" charset="Shift_JIS" />
	<link rel="stylesheet" href="../sys/skin/pure/buttons.css" type="text/css" media="screen" charset="Shift_JIS" />
	<link rel="stylesheet" href="../sys/skin/standard-3gou-pure.css" type="text/css" media="screen" charset="Shift_JIS" />
		<link rel="stylesheet" href="../sys/skin/smilebasic.css" type="text/css" media="screen" charset="Shift_JIS" />
	<link rel="stylesheet" href="../sys/skin/standard-petc/colorbox.css" type="text/css" media="screen" charset="Shift_JIS" />
	<!--[if IE]><link rel="stylesheet" href="../sys/skin/smilebasic-ie.css" type="text/css"/><![endif]-->
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
	<script type="text/javascript" src="../sys/skin/standard-petc/wordbreak.js"></script> 
	<script type="text/javascript" src="../sys/skin/standard-petc/jquery.colorbox-min.js"></script> 
		<meta name="twitter:title" content="FAQ の編集 - プチコン4 まとめWiki" />
	<meta name="twitter:description" content="たぶんわかる! たぶん飛び出す! プログラムが組めそうな気がするWiki" />
	<meta name="twitter:card" content="summary" />
	<meta name="twitter:image" content="http://wiki.hosiken.jp/sys/skin/face/hakase-cry-rev.png" />
	<meta name="twitter:site" content="@hosiken" />
	<link rel="alternate" type="application/rss+xml" title="RSS" href="/petc4/?cmd=rss" />	<script language="JavaScript">
		$(document).ready(function(){
			$(".ColorBoxYouTube").colorbox({iframe:true, innerWidth:425, innerHeight:344});
		});
		(function(l){var i,s={touchend:function(){}};for(i in s)l.addEventListener(i,s)})(document); // sticky hover fix in iOS
	</script>
<body>

<div id="block-container">

	<div id="block-header">

		<h1><a href="/petc4/">プチコン4 まとめWiki</a></h1>

	<div id="block-topbox">
		<div id="headermenu">
	<ul class="menu">
		<li><a href="./?plugin=search">検索</a></li>
		<li><a href="./?Help">ヘルプ</a></li>
		<li class="parent last highlight"><a href="javascript:void(0);">Wikiの機能</a><ul>
				<li><a href="/petc4/?cmd=edit&amp;page=FAQ">このページを編集</a></li>
				<li><a href="/petc4/?cmd=diff&amp;page=FAQ">前回からの変更点</a></li>
				<li><a href="/petc4/?plugin=attach&amp;pcmd=upload&amp;page=FAQ">ファイルをアップロード</a></li>
				<li><a href="/petc4/?plugin=newpage&amp;refer=FAQ">新しいページをつくる</a></li>
				<li><a href="/petc4/?cmd=list">すべてのページの一覧</a></li>
				<li><a href="/petc4/?RecentChanges">最近更新されたページ</a></li>

</ul></li>
</ul>
</div>
</div>

	</div>

	<div id="block-extra-navi">
		<ul>
			<li id="active">プチコン4</li>
			<li><a href="/petc3gou/">3号/BIG</a></li>
			<li><a href="/petc/">初代/mkII</a></li>
</ul>
	</div>


	<div class="pure-u-1">
		<div id="block-body"><div id="block-body-container">

			<h2>FAQ の編集</h2>

			<div id="block-pankuzu-body">

				<h3 id="header-pankuzu">パンくずリスト</h3>

				<ul id="list-pankuzu">
<li id="list-pankuzu-home"><a href="/petc4/">トップ</a></li>
<li id="list-pankuzu-current"><a href="/petc4/?FAQ">FAQ</a></li>				</ul>

			</div>

<div id="body">
<div class="edit_form">
 <form action="/petc4/" method="post" style="margin-bottom:0px;" id="editForm" class="pure-form">
<div><input type="hidden" name="encode_hint" value="ぷ" /></div>
  <select name="template_page">
   <option value="">-- 雛形とするページ --</option>
   <option value="Board">Board</option>
   <option value="Bug">Bug</option>
   <option value="Chat">Chat</option>
   <option value="Contact">Contact</option>
   <option value="Demand">Demand</option>
   <option value="FAQ">FAQ</option>
   <option value="FormattingRules">FormattingRules</option>
   <option value="FrontPage">FrontPage</option>
   <option value="Help">Help</option>
   <option value="Hot">Hot</option>
   <option value="InterWikiName">InterWikiName</option>
   <option value="Link">Link</option>
   <option value="Mame">Mame</option>
   <option value="Mame/DlRanking">Mame/DlRanking</option>
   <option value="Mame/Error-and-solution">Mame/Error-and-solution</option>
   <option value="Mame/MML3and4">Mame/MML3and4</option>
   <option value="Mame/Systemvar">Mame/Systemvar</option>
   <option value="Mame/UIFunc">Mame/UIFunc</option>
   <option value="Mame/petitline">Mame/petitline</option>
   <option value="Memo">Memo</option>
   <option value="MenuBar">MenuBar</option>
   <option value="OverFlow">OverFlow</option>
   <option value="RecentDeleted">RecentDeleted</option>
   <option value="Sample">Sample</option>
   <option value="SandBox">SandBox</option>
   <option value="Toukou">Toukou</option>
   <option value="Toukou/BALLFALL">Toukou/BALLFALL</option>
   <option value="Toukou/BG_chk">Toukou/BG_chk</option>
   <option value="Toukou/DEF.No.4">Toukou/DEF.No.4</option>
   <option value="Toukou/EATRUNNER">Toukou/EATRUNNER</option>
   <option value="Toukou/FLOW_GRP_VIEWER">Toukou/FLOW_GRP_VIEWER</option>
   <option value="Toukou/FUDEX">Toukou/FUDEX</option>
   <option value="Toukou/MDOS">Toukou/MDOS</option>
   <option value="Toukou/MML_CARRIER">Toukou/MML_CARRIER</option>
   <option value="Toukou/MOHAN">Toukou/MOHAN</option>
   <option value="Toukou/Musics12_Pro">Toukou/Musics12_Pro</option>
   <option value="Toukou/Musics5">Toukou/Musics5</option>
   <option value="Toukou/MusicsGG">Toukou/MusicsGG</option>
   <option value="Toukou/MusicsXI">Toukou/MusicsXI</option>
   <option value="Toukou/Musics_K_Touch">Toukou/Musics_K_Touch</option>
   <option value="Toukou/New Musics+">Toukou/New Musics+</option>
   <option value="Toukou/NewリズミカルおもちつきSP_Switch">Toukou/NewリズミカルおもちつきSP_Switch</option>
   <option value="Toukou/PC8001_FOR_PETITCOM4">Toukou/PC8001_FOR_PETITCOM4</option>
   <option value="Toukou/PC8001mk2_for_PETITCOM4">Toukou/PC8001mk2_for_PETITCOM4</option>
   <option value="Toukou/PC8801_for_PETITCOM4">Toukou/PC8801_for_PETITCOM4</option>
   <option value="Toukou/PXLIB">Toukou/PXLIB</option>
   <option value="Toukou/PanelTrick">Toukou/PanelTrick</option>
   <option value="Toukou/PetitConverter">Toukou/PetitConverter</option>
   <option value="Toukou/QR CODER">Toukou/QR CODER</option>
   <option value="Toukou/QRLib">Toukou/QRLib</option>
   <option value="Toukou/RCBMP SP">Toukou/RCBMP SP</option>
   <option value="Toukou/Rouge et Blanc">Toukou/Rouge et Blanc</option>
   <option value="Toukou/S01(リズムゲーム)">Toukou/S01(リズムゲーム)</option>
   <option value="Toukou/SBDBG">Toukou/SBDBG</option>
   <option value="Toukou/SBDBGLIBandSBPP">Toukou/SBDBGLIBandSBPP</option>
   <option value="Toukou/SBplusplus">Toukou/SBplusplus</option>
   <option value="Toukou/SUNRISE AIRPORT">Toukou/SUNRISE AIRPORT</option>
   <option value="Toukou/Sky High">Toukou/Sky High</option>
   <option value="Toukou/TATAKI TSUBUSE 猫魔王">Toukou/TATAKI TSUBUSE 猫魔王</option>
   <option value="Toukou/Tiny MML Sequencer">Toukou/Tiny MML Sequencer</option>
   <option value="Toukou/Updates">Toukou/Updates</option>
   <option value="Toukou/Winphone5">Toukou/Winphone5</option>
   <option value="Toukou/XML.LIB">Toukou/XML.LIB</option>
   <option value="Toukou/XelticaMMLCollection">Toukou/XelticaMMLCollection</option>
   <option value="Toukou/bluepetit-alpha">Toukou/bluepetit-alpha</option>
   <option value="Toukou/jintori">Toukou/jintori</option>
   <option value="Toukou/kaleido_trigger">Toukou/kaleido_trigger</option>
   <option value="Toukou/nFEP">Toukou/nFEP</option>
   <option value="Toukou/yotasuke">Toukou/yotasuke</option>
   <option value="Toukou/ＬＥＶＥＬ７">Toukou/ＬＥＶＥＬ７</option>
   <option value="Toukou/ＭＥＥＴ ＵＰ">Toukou/ＭＥＥＴ ＵＰ</option>
   <option value="Toukou/ありす１２８">Toukou/ありす１２８</option>
   <option value="Toukou/ありすとぱねる">Toukou/ありすとぱねる</option>
   <option value="Toukou/しゅっ球">Toukou/しゅっ球</option>
   <option value="Toukou/ひたすらたべるだけ">Toukou/ひたすらたべるだけ</option>
   <option value="Toukou/まーじゃんのようなもの。for Switch">Toukou/まーじゃんのようなもの。for Switch</option>
   <option value="Toukou/エネミーズ">Toukou/エネミーズ</option>
   <option value="Toukou/カエルそだて">Toukou/カエルそだて</option>
   <option value="Toukou/カップリングパズル">Toukou/カップリングパズル</option>
   <option value="Toukou/カビスタちゃんの★流れ星をつかまえてHD">Toukou/カビスタちゃんの★流れ星をつかまえてHD</option>
   <option value="Toukou/シューティングゲーム">Toukou/シューティングゲーム</option>
   <option value="Toukou/シリウスの厳選自作曲集">Toukou/シリウスの厳選自作曲集</option>
   <option value="Toukou/ドキュメントツール「My-style Docs」">Toukou/ドキュメントツール「My-style Docs」</option>
   <option value="Toukou/プチコンシリーズ共通音楽パックフォーマット NMPACKS">Toukou/プチコンシリーズ共通音楽パックフォーマット NMPACKS</option>
   <option value="Toukou/プチコン漢字ライブラリ">Toukou/プチコン漢字ライブラリ</option>
   <option value="Toukou/プチフォントエディタ">Toukou/プチフォントエディタ</option>
   <option value="Toukou/メモロウ2">Toukou/メモロウ2</option>
   <option value="Toukou/リズミカルおもちつきHD">Toukou/リズミカルおもちつきHD</option>
   <option value="Toukou/リズミカルおもちつきJH">Toukou/リズミカルおもちつきJH</option>
   <option value="Toukou/リズミカルおもちつきNTG">Toukou/リズミカルおもちつきNTG</option>
   <option value="Toukou/リズミカルおもちつきΣ Switch Ver.">Toukou/リズミカルおもちつきΣ Switch Ver.</option>
   <option value="Toukou/気まぐれラジオ4">Toukou/気まぐれラジオ4</option>
   <option value="Toukou/人工無能プチ太郎 SP">Toukou/人工無能プチ太郎 SP</option>
   <option value="Toukou/弾幕ボスバトル">Toukou/弾幕ボスバトル</option>
   <option value="ToukouRule">ToukouRule</option>
   <option value="ToukouTemplate">ToukouTemplate</option>
   <option value="WorksLink">WorksLink</option>
   <option value="コメント/Toukou/Musics5">コメント/Toukou/Musics5</option>
   <option value="コメント/Toukou/NewリズミカルおもちつきSP_Switch">コメント/Toukou/NewリズミカルおもちつきSP_Switch</option>
   <option value="コメント/Toukou/リズミカルおもちつきΣ Switch Ver.">コメント/Toukou/リズミカルおもちつきΣ Switch Ver.</option>
  </select>
  <input type="submit" name="template" value="読込" accesskey="r" />
  <br />
  
  <input type="hidden" name="cmd"    value="edit" />
  <input type="hidden" name="page"   value="FAQ" />
  <input type="hidden" name="digest" value="8aa28282ab628624f214f9c2bed74c6b" />
  <textarea name="msg" rows="20" cols="80" class="checkValue">#title(よくある質問集)
#contentsx(depth=1:2)

* プチコン4について [#q20a0a70]
** Q. プチコン4 とはなんですか [#rab5726b]
プチコン4 は、2019 年 5 月 23 日 に発売された、プチコンシリーズの Nintendo Switch 向け最新作です。SmileBASIC の最新バージョン Ver.4 を搭載しています。

3号との互換性は確保されていませんが、文法や仕様レベルでは引き継いでいる点が多く、そのままでは動作しないものの、3号でサーバーにアップロードした作品を持ち込むことができます。

ニンテンドーラボの Toy-con も利用可能で、IR カメラの制御もできます。

** Q. プチコン4 はどこで売っていますか? [#w0f71600]
Nintendo Switch のニンテンドー eショップでダウンロード販売中です。[[マイニンテンドーストア:https://ec.nintendo.com/JP/ja/bundles/70070000005852]]でも購入できます。

** Q. プチコン4 の価格はいくらですか? [#sd2d3c67]
3000 円(税込) です。作品共有用サーバーに接続できる「サーバー利用券」が 1 枚付属し、購入に使用したニンテンドーアカウントに付与されます。

** Q. サーバー利用券なしのソフト単品で売ってないのですか? [#iefcdbfa]
2019 年 7 月 17 日から販売開始されました。価格はサーバー利用券の料金を差し引いた 2500 円(税込) です。

単品が発売された理由として、サーバー利用券とのセットだとニンテンドー e ショップや任天堂公式サイトのリストに並ばないことがあります。これだけではサーバー利用券がないためアップロードが一切できず、ダウンロードにも制限がありますので、通常は利用券とのセットを購入してください。間違えて単品を購入した場合でも、そのアカウントでサーバー利用券を追加購入すれば、価格を含め利用券セットと同等の内容になります。

* ハードウェア [#o843b7c8]
** Q. キーボードは使えますか? [#ec6f302a]
USB 接続のキーボードが使えます。Bluetooth 接続のキーボードは使用できません (Switch 本体が対応してません)。

** Q. ツクモから発売されたプチコン用キーボードしか使えないのですか? [#vd54fa03]
いいえ、市販の USB キーボードも使用できます。ロジクールなどの無線レシーバータイプ (Unifying など) のキーボードもおおむね使用できるようです (動作しないものもあります)。

[[プチコン用キーボード:https://www.4gamer.net/games/420/G042044/20190605058/]]はキートップに入力できる絵文字が載っているなど、プチコンや Pi STARTER を使用するのに便利な印刷がされているうえに動作が保証されていますが、キーボードの仕様としては一般的な Windows 用キーボードでパソコンでも使用できるものです。便利なものですが、必須ではありません。

** Q. マウスは使えますか? [#i2ff27a6]
USB 接続のマウスが使えます。ただし、無線レシーバータイプのマウス (特にロジクールの Unifying レシーバー) は Switch 本体が認識しないものが多く、有線タイプのマウスの使用が推奨されています。

** Q. USB のキーボードやマウスはどうやって接続するのですか? [#mab5e9e3]
Switch の USB 端子は Type-C ですので、以下のいずれかで接続できます。

- Switch をドックにセットし、ドックの USB 端子に接続する。
- Switch をホリの[[テーブルモード専用 USB ハブスタンド:https://hori.jp/products/nsw/usb_hub_stand/]] にセットし、スタンドの USB 端子に接続する。
- USB Type-C と USB Type-A を変換するコネクタ (ダイソーで 100 円で売っているものでも OK) やアダプタを経由して接続する。

** Q. テレビに接続すると画面がはみ出てしまいます [#TV_screen]
Nintendo Switch 本体の設定で「テレビ出力」→「画面の大きさを調整」で調節できます。

* ネットワーク [#rbd3cf47]
** Q. Nintendo Switch Online に加入する必要はありますか? [#yb1e57fb]
加入する必要はありません。かわりに、プチコン4 独自の「サーバー利用券」を使用します。

なお、Nintendo Switch Online に加入していると[[セーブデータお預かり:https://www.nintendo.co.jp/hardware/switch/onlineservice/savedata/]]でセーブデータをクラウドにバックアップしておけるメリットがあります。

** Q. サーバー利用券とはなんですか? [#keded0e9]
サーバー利用券はニンテンドーアカウントごとに持つことができる、プチコン4 の作品共有用サーバーに接続する際に利用するチケットです。

サーバー利用券を持っていると、作品をアップロードするためのサーバー上の場所を持つことができます。また、1枚でもサーバー利用券を持っていれば、作品のダウンロードがいくつでもできるようになります。サーバー利用券だけを購入することもでき (500 円(税込) )、複数持っているとアップロードできる総数が追加されます (サーバー利用券 1 枚につき 10 スロット)。

サーバー利用券は、プチコン4 の利用券セットに付属しており、購入したニンテンドーアカウントに 1 枚が付与されます。同じ本体の別アカウントは、プチコン4 を起動して利用することができますが、サーバー利用券は持っていない状態となります。

サーバー利用券を持っていない場合、作品のアップロードはできず、ダウンロードは 8 時間に 1 回に制限されます。

** Q. サーバー利用券に期限はありますか? 使ったらなくなりますか? [#la38a167]
一度購入したサーバー利用券は無期限、回数無制限です。プチコン3号やBIGのゴールド会員権のような期限はありません。そして何回でも使えます。

** Q. サーバーにはいくらの容量までの作品をアップロードできますか? [#i8284676]
1 つのスロット (プロジェクト) につき、20 MB まで (プチコン3号や BIG のゴールド会員権と同じ) です。なお、プチコン4 では、DAT ファイルと GRP ファイルは保存時に自動で圧縮され、保存データが小さくなります。

** Q. プチコン4 を購入したけど、サーバー利用券がないと表示されます [#oe302abb]
サーバー利用券は、プチコン4 の利用券セットを購入したニンテンドーアカウントに付与されます。同じ本体のほかのアカウントで起動した場合は、サーバー利用券を持っていない状態ですので、そのアカウントでサーバー利用券 (500 円(税込) ) を購入する必要があります。

* はじめてのかた [#k71f1577]
** Q. 『メイドイン俺』やツクールシリーズみたいに、初心者でも簡単に何か作品を作ることができるの? [#y3681b66]
BASIC とはいえども立派なプログラミング言語の一種です。プログラミング言語の中では比較的簡単な部類ですが、一応簡単な (本当に簡単な) BASIC が大学センター試験の数学の問題として毎年出題されているほどのものです。『メイドイン俺』や『RPG ツクール』みたいに、そうそう簡単に覚えたり作ったりはできません。
 
が、プログラムの作り方を教えているサイトなどで段階を踏んで覚えていけば、最後には誰でも自由なゲーム・ツールのプログラムが書けるようになるでしょう。

2011 年の初代プチコン発売直後からすでに作品がぽつぽつ公開されていたのは、初期のプチコン購入者の大半が腕に覚えがあるおっさんだったからです。今時のパソコンで言うと、[[HSP:http://hsp.tv/]] 程度の難易度ではないかと思われます。

* プチコン3号からの引き継ぎ [#d51277ce]
** Q. プチコン4 を買った場合、プチコン3号で作成したデータは引き継げますか? [#l85a46a9]
プチコン4 にプチコン3号の公開キーを入力して、作品をダウンロードすることができます。ただし、互換性がないので、動作させるにはプチコン4 の仕様に合わせて修正が必要です。また、プチコン4 の公開キーをプチコン3号から利用することはできません。

** Q. プチコン3号以前に作ったプログラムは、プチコン4で動きますか? [#e81dd38d]
プチコン4 は、プチコン3号から引き継いでいる部分が多いですが、ハードウェアの仕様の違いによるものや、互換性よりも機能の拡張を優先している部分が多いため、互換性はなく、そのままではまず動きません。ある程度書き換えが必要ですが、作品が使っている機能によっては、わずかな修正で移植することも不可能ではありません。

また、プチコン3号のプログラムをプチコン4用に変換する[[プチコンバータ&gt;Toukou/PetitConverter]]を使うのも一つの方法です。

なお、プチコンmkII 以前との互換性は3号の時点でほとんど失われていますので、これについては%%諦めてください。%%
//このwikiにmkIIのプログラムを読み替えて実行するプログラムがあります。（すべての作品が動くわけではありませんが…）
プチコンmkIIのプログラムを3号用に変換する[[プチコンmkII at 3号&gt;3gou:Toukou/プチコンmkII_at3号]]があるので、それをさらにプチコン4用に変換することでもしかしたら動くかもしれません。

** Q. プチコン3号の公開キーから取り込んだGRPファイルが読み込めません。 [#h832cec1]
プチコン3号形式のGRPファイルは、
#basic(noline){{
LOADG &quot;DAT:ファイル名&quot;,読み込みたいページ名
}}
で読み込めます。なお、GRP はプチコン4 の &amp;basic{SAVEG}; 命令で保存しなおすと圧縮がかかるので、3号よりもかなりサイズを小さくできます。

* プチコンの操作 [#f28a1610]
** Q. コピーペーストしたいんですが、範囲選択ってどうやるの? [#x50c17d1]
以下のいずれかでできます。
- キーボードの Shift を押しながらカーソル移動
- ZL または ZR ボタンを押しながらカーソル移動
- マウスカーソルでドラッグ

** Q. 画面タッチで文字入力したいのですが、どうやったらキーボードが出ますか [#of072e66]
コントローラーの - ボタンや、キーボードの「メニューキー」を押すことで、ソフトキーボードの表示切り替えができます。

** Q. ソフトキーボードの場所を移動させる方法が分かりません [#e333bc76]
ソフトキーボードの右下の小さい○印をタッチするたびに、場所が移動します。

** Q. 漢字を含む文章を入力することはできますか? [#x0eda955]
プチコン4 には、ソフトキーボードに代表的な音読みの頭文字を入力して、漢字を探して入力する機能があります。また、サンプルプロジェクトの KNJTABLE (&amp;basic{LOAD ”#SAMPLE/KNJTABLE”};) に内のコメントにソフトキーボード同様の漢字一覧が書かれていて、コピペで利用できます。

USB キーボードから漢字を入力する機能は標準では搭載されていませんが、サーバーの作品一覧に「RMG IME」という便利な作品があります。これをダウンロードし、設定画面から「RMG_IME.PRG」を「スマイルボタン3」に登録します。すると、USB キーボードの F11 キーで漢字変換ができる画面があらわれ、スムーズに漢字を入力できるようになります。

** Q. 作品の保存はどれぐらいできますか? [#jd8f9302]
初期状態では、64 MB までです。本体の保存領域にセーブされます。容量が足りなくなった場合は、設定画面から、256 MB、512 MB の 2 段階に拡張できます。一度拡張すると、前の容量に戻すことはできません。また、どれぐらい保存しているかにかかわらず、現在確保している分の本体容量をつねに使用します。つまり、512 MB まで拡張すると、プチコン 4 のセーブデータは常に本体上に 512 MB + α の大きさで存在することとなります。

** Q. 本体の容量が足りません。作品を SD カードに保存することはできますか? [#s86d08e4]
できません。Nintendo Switch は、セーブデータは本体への保存のみに限定されています。これは穴をついての本体改造行為をさせないための設計のようです。

* 作品の公開・ダウンロード [#j25e3d16]
** Q. ほかの人の作品の公開キーはどこで手に入りますか? また、どこで自分の公開キーを晒せばいいですか? [#d4b99039]
このあたりで作品キーのやり取りが行われています。

- [[このWikiの投稿プログラムコーナー&gt;Toukou]]
- [[このWikiのプチコン4作品集&gt;WorksLink]]
- [[このWikiのOFコーナー&gt;OverFlow]] (作りかけのもの、テストプログラムなどを気軽に投稿してください)
- [[Twitter ハッシュタグ「#petitcom」&gt;ハッシュタグ:petitcom]]
- [[Twitter ハッシュタグ「#sbkey」&gt;ハッシュタグ:sbkey]] (公開キー付きツイートに付けるハッシュタグ)
- [[Petitverse プチコンコミュニティ:http://petitverse.hosiken.jp/community/petitcom/]] (本Wikiの管理人が運営する Miiverse 風掲示板)

** Q. ファイルや作品をアップロードして公開したけど、サーバーの作品一覧に並びません [#d3b3ca8e]
サーバーの作品一覧には、プロジェクトをアップロードした場合に並びます。ファイルを単独でアップロードした場合は、公開キーが発行されるのみで一覧には並びません。

//また、作品一覧は、いいねまたはダウンロード数の上位 120 作品までしか表示されません。そのため、アップロードしても一覧にはなかなか載りません。
作品の存在になかなか気付いてもらえない場合、アップロードしたことを知ってもらうには、以下のような方法があります。

- この Wiki の[[投稿プログラムコーナー&gt;Toukou]]に作品を投稿してみます。
- Twitter のハッシュタグ [[#sbkey&gt;ハッシュタグ:sbkey]] で作品の紹介をしてみます。
- この Wiki の [[OF コーナー&gt;OverFlow]] や [[Petitverse&gt;Board]] で作品の紹介をしてみます。

//新規の作品が埋もれてしまう件については、今後のアップデートで改善されることが予告されています。

** Q. ファイルをアップロードして公開キーを発行したいですが、サーバーの作品リストに並んでほしくないです [#oa1b77e2]
現時点では、プロジェクトではなく、プロジェクト内のファイル単体をアップロードすると、サーバーの作品一覧に並ぶことなく公開キーを発行できます。

** Q. 作品のユーザー名ってどうやって入力するのですか [#m96e615e]
作品をアップロードしたときに、本体のアカウントに設定されているユーザー名が自動的に作品のユーザー名に設定されます。

** Q. 作品公開にあたって見落としがちな注意事項はありますか [#publicNG]
問題が無さそうなのに『公開NG』になってしまったら確認した方がよさそうなこと
- プチコンと関係がないサイトのURLを書くことはNGとのことです
#tweet(https://twitter.com/notohoho/status/1206100603136380928)
- &amp;basic{METAEDIT}; 命令で編集できる『説明文』はあくまでも作品の説明を書く場所です
-- URLに限らずSNSのID等も『公開NG』の対象になります
#tweet(https://twitter.com/notohoho/status/1206725577329135617)

* 命令・機能 [#hb60f85e]
** Q. COLOR 命令を使用すると文字が表示されなくなってしまいます。 [#gc22431a]
プチコン4 の &amp;basic{COLOR}; 命令は、線や円の描画と同じように、32 ビットカラーで指定します。旧来の BASIC やプチコン3号 までのように、色を 0〜15 の値で指定すると「透明度がゼロの黒か限りなく暗い青」になり文字が見えなくなってしまいます。

&amp;basic{COLOR #C_BLUE}; のように、&amp;basic{#C_}; で始まる定数の色を使用したり、&amp;basic{COLOR RGB(255,255,255)}; のように、&amp;basic{RGB()}; 関数を使って色を指定してみてください。 

** Q. 過去のプチコンにあった BG ってなくなったんですか? [#z0efa99a]
BG は[[テキストスクリーン:https://sup4.smilebasic.com/doku.php?id=reference:%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E5%85%A5%E5%87%BA%E5%8A%9B]]に統合されました。テキストスクリーンとはまさに文字が表示されている部分ですが、今回は統合により、ゲームの背景やマップ表示にも使えます。

プチコン3号の BG は 4 画面、テキストスクリーンは 1 画面ありましたが、プチコン4 ではテキストスクリーンが 5 画面あります。そのすべてが、プチコン 3 号における BG とテキストスクリーン両方の機能を含有しています。

以下の違いだけで、基本的には BG と同じように使用することができます。

- BG 機能の呼び名がテキストスクリーンに変わったので、リファレンスマニュアルでもそちらを参照します。
- 命令名が「BG」で始まっていた BG 用命令は、テキストスクリーン用として「T」で始まる名前に変わっています。
- これまで同じ機能なのに、テキストと BG で命令が分かれていたものは、基本的にテキストの命令に機能統合されています。たとえば、&amp;basic{BGCLR}; は &amp;basic{CLS}; に。&amp;basic{BGCHK}; は &amp;basic{CHKCHR}; に統合されました。
- &amp;basic{TPRINT}; や &amp;basic{TINPUT}; などの命令で文字の表示ができます。
- BG におけるチップ番号 は 0〜4095 (ただし、1024 以降は繰り返しのため 1024 個分) だったのが、&amp;HE800〜&amp;HF7FF (4096 個分) になりました。0 から始まらないのは、テキスト用の文字もすべて表示できて、それらの文字とコードを共有しているためです。PRINT CHR$(&amp;HE880) のようにすると、テキストに混じってBGチップを表示することもできます。

#tweet(https://twitter.com/hosiken/status/1133762499872845824)

** Q. テキストスクリーンに CHR$(3号のBGチップ番号+&amp;HE800)を表示させても、3号と同じ絵が出てこないです [#qdd0d575]
プチコン4 では、テキストスクリーン(実質BG)の文字サイズが16x16 ドットの場合、BGチップの素材の範囲が拡大されました。3号の4倍である、4096枚扱え、画像素材のサイズは 1024x1024 となります。

しかし、デフォルトの BG 素材は3号と同じ配置で 512x512 のサイズで配置されているため、4 の番号の並びとは一致しておらず、そのままでは、チップ番号に &amp;HE800 を足しても 3号と同じチップが表示されません。

上記の説明がよくわからなくても構いません。とりあえず、以下のプログラムを自分のプログラムに組み込んで、ACLS 命令で画面クリアしたあとに実行しておくと、GCOPY 命令を使って標準の画像素材の BG がある部分を4基準に並び変えます。これにより、3号のチップ番号に &amp;HE800 を足すだけで絵が一致するようになります。
#basic{{
' GRP4 の BGの番号の並びをプチコン3号と同じにする
GTARGET 4
FOR I=0 TO 31
  GCOPY 1024,I*32+16,1024+511,I*32+31,1024+512,I*16,#G_NORMAL
  IF I&gt;0 THEN GCOPY 1024,I*32,1024+511,I*32+31,1024,I*16,#G_NORMAL
NEXT
GTARGET 0
}}

** Q. BGOFS を TOFS に置き換えたら、絵が逆に動きます [#f38342d8]
プチコン4 の TOFS 命令は『X座標が増えると右に移動』『Y座標が増えると下に移動』という挙動になっています。これは SPOFS 命令と同じ挙動です。

簡単な対処法は座標の数値にマイナスを付けることです。

** Q. グラフィック画面のページを GPAGE 命令で変えられないし、GOFS 命令で動かしたりもできません [#t14b1eb5]
グラフィック画面は 4095 番のスプライトになりました。4095 という数字は、&amp;basic{#GSPRITE}; という定数で定義されています。

4095 番のスプライトのほかとの違いは、画面の初期化時に、グラフィック画面として機能するように初期化がされることだけです。それ以外は完全にスプライトとして制御しほうだいで、あらためて設定し直してただのスプライトのひとつに変えてしまうこともできます。

また、同じようなスプライトを作ってグラフィック画面が複数面ある状態を作ることもできます。

したがって、これまでの命令は、以下のようにスプライトを操作して代替できます。
- グラフィック画面のページを変える (従来の &amp;basic{GPAGE};) → &amp;basic{SPPAGE #GSPRITE,ページ};
- グラフィック画面を動かす (従来の &amp;basic{GOFS};) → &amp;basic{SPOFS #GSPRITE,-X,-Y};
- グラフィック画面を非表示にする → &amp;basic{SPHIDE #GSPRITE};

** Q. グラフィック画面を動かすと領域外が切れてしまいます [#vcbe004a]
グラフィック画面のスプライトは、画面と同じ大きさで生成されます。そのため、SPOFS でずらしたりすると、画面外の部分は表示されません。これは、&amp;basic{SPCHR}; でスプライトを GRP と同じサイズまで広げることにより解決します。
#basic(noline){{
SPCHR #GSPRITE,0,0,2048,2048
}}
#basic(noline){{

' GRPの大きさ(2048X2048)は定数で定義されている
SPCHR #GSPRITE,0,0,#GRPWIDTH,#GRPHEIGHT
}}

** Q. ソフトウェアキーボードの表示、非表示を制御することはできますか? [#e5ad33ef]
#tweet(https://twitter.com/notohoho/status/1133303750536204288)

** Q. FREEMEM() で残りフリーメモリを見ていると、減っていく一方でいっこうに回復しません。 [#l6b3d3e2]
プチコン4 の仕様です。プチコン3号と違い、使わなくなったメモリはタイミングを見計らったときか、本当に足りなくなったときに、まとめて一気に解放されます。そのため、FREEMEM() は何をしても減っていく一方に見えますが、なくなりかけたら突然全回復するという動きをします。

** Q. スマイルツールで見られる画像素材の約 1500 番以降が使用できない。違う絵が出てくる。 [#v877a44e]
スマイルツールでは、デフォルトの画像素材に含まれる全ての絵の情報が登録されていますが、SPSET などで使用できる定義番号としては、1500 番ぐらいまでしか登録されていません。これは、定義番号の初期状態が、前作のプチコン3号と同じ状態になっているのが理由です。

スマイルツールで、画像素材を選択して X ボタンを押すと、SPDEF 命令の引数として使える情報をコピーして、どこかにペーストできます。しかし、1 つずつ行う必要があるため大変です。

スマイルツールで使用している素材の情報は #TOOL/DEFSP1.TXT にあり、どこからでもロードできます。これを利用して自分でひととおり定義してしまうという方法があります。
#tweet(https://twitter.com/hosiken/status/1140927983768571904)
#tweet(https://twitter.com/omusubi_p/status/1132270177934962688)

** Q. GAHAKU で描いた絵を保存すると 1MB ぐらいになって、セーブデータ領域を圧迫してしまいます。 [#vea2dbe7]
デフォルト素材の一部を書き換えてまるごと保存すると、大きくなってしまいます。SAVEG 命令に、画像の一部分を保存する機能があります。これを使って、書き換えていない部分を省くことにより、大幅にファイルサイズが小さくなります。

* サンプル [#i9389bd8]
** Q. サンプルの「KANJITBL」が起動しません [#tcd91b1f]
これは音読みの頭文字と漢字の一覧がコメントとして列挙されているファイルです。プログラムとしては動作せずにすぐに終了しますが、これは想定通りです。

** Q. 公式でサーバーに公開されているサンプルゲーム「クレイジードレドランド」で、ボスのじゃんけんに勝てません [#k400bd0b]
なんで負けたか、明日まで考えといてください。ボスのじゃんけんに勝つには、プログラムの中を読んで何か ZURU をしていないか確認する必要がありそうです。そしたら何かか見えてくるはずです。改造はしなくてよいです。
</textarea>
  <br />
  <div>
   <input type="submit" name="preview" value="プレビュー" accesskey="p" class="submitBtn" />
   <input type="submit" name="write"   value="ページの更新" accesskey="s" class="submitBtn pure-button-primary" />
   
   <label for="_edit_form_notimestamp" style="margin-left: 1em; margin-right: 1em; display: inline-block;"><input type="checkbox" name="notimestamp" id="_edit_form_notimestamp" value="true" />
   <span class="small">タイムスタンプを変更しない</span></label>
&nbsp;
   <a href="/petc4/?FAQ" style="display: inline-block;">キャンセル</a>
  </div>
  <textarea name="original" rows="1" cols="1" style="display:none">#title(よくある質問集)
#contentsx(depth=1:2)

* プチコン4について [#q20a0a70]
** Q. プチコン4 とはなんですか [#rab5726b]
プチコン4 は、2019 年 5 月 23 日 に発売された、プチコンシリーズの Nintendo Switch 向け最新作です。SmileBASIC の最新バージョン Ver.4 を搭載しています。

3号との互換性は確保されていませんが、文法や仕様レベルでは引き継いでいる点が多く、そのままでは動作しないものの、3号でサーバーにアップロードした作品を持ち込むことができます。

ニンテンドーラボの Toy-con も利用可能で、IR カメラの制御もできます。

** Q. プチコン4 はどこで売っていますか? [#w0f71600]
Nintendo Switch のニンテンドー eショップでダウンロード販売中です。[[マイニンテンドーストア:https://ec.nintendo.com/JP/ja/bundles/70070000005852]]でも購入できます。

** Q. プチコン4 の価格はいくらですか? [#sd2d3c67]
3000 円(税込) です。作品共有用サーバーに接続できる「サーバー利用券」が 1 枚付属し、購入に使用したニンテンドーアカウントに付与されます。

** Q. サーバー利用券なしのソフト単品で売ってないのですか? [#iefcdbfa]
2019 年 7 月 17 日から販売開始されました。価格はサーバー利用券の料金を差し引いた 2500 円(税込) です。

単品が発売された理由として、サーバー利用券とのセットだとニンテンドー e ショップや任天堂公式サイトのリストに並ばないことがあります。これだけではサーバー利用券がないためアップロードが一切できず、ダウンロードにも制限がありますので、通常は利用券とのセットを購入してください。間違えて単品を購入した場合でも、そのアカウントでサーバー利用券を追加購入すれば、価格を含め利用券セットと同等の内容になります。

* ハードウェア [#o843b7c8]
** Q. キーボードは使えますか? [#ec6f302a]
USB 接続のキーボードが使えます。Bluetooth 接続のキーボードは使用できません (Switch 本体が対応してません)。

** Q. ツクモから発売されたプチコン用キーボードしか使えないのですか? [#vd54fa03]
いいえ、市販の USB キーボードも使用できます。ロジクールなどの無線レシーバータイプ (Unifying など) のキーボードもおおむね使用できるようです (動作しないものもあります)。

[[プチコン用キーボード:https://www.4gamer.net/games/420/G042044/20190605058/]]はキートップに入力できる絵文字が載っているなど、プチコンや Pi STARTER を使用するのに便利な印刷がされているうえに動作が保証されていますが、キーボードの仕様としては一般的な Windows 用キーボードでパソコンでも使用できるものです。便利なものですが、必須ではありません。

** Q. マウスは使えますか? [#i2ff27a6]
USB 接続のマウスが使えます。ただし、無線レシーバータイプのマウス (特にロジクールの Unifying レシーバー) は Switch 本体が認識しないものが多く、有線タイプのマウスの使用が推奨されています。

** Q. USB のキーボードやマウスはどうやって接続するのですか? [#mab5e9e3]
Switch の USB 端子は Type-C ですので、以下のいずれかで接続できます。

- Switch をドックにセットし、ドックの USB 端子に接続する。
- Switch をホリの[[テーブルモード専用 USB ハブスタンド:https://hori.jp/products/nsw/usb_hub_stand/]] にセットし、スタンドの USB 端子に接続する。
- USB Type-C と USB Type-A を変換するコネクタ (ダイソーで 100 円で売っているものでも OK) やアダプタを経由して接続する。

** Q. テレビに接続すると画面がはみ出てしまいます [#TV_screen]
Nintendo Switch 本体の設定で「テレビ出力」→「画面の大きさを調整」で調節できます。

* ネットワーク [#rbd3cf47]
** Q. Nintendo Switch Online に加入する必要はありますか? [#yb1e57fb]
加入する必要はありません。かわりに、プチコン4 独自の「サーバー利用券」を使用します。

なお、Nintendo Switch Online に加入していると[[セーブデータお預かり:https://www.nintendo.co.jp/hardware/switch/onlineservice/savedata/]]でセーブデータをクラウドにバックアップしておけるメリットがあります。

** Q. サーバー利用券とはなんですか? [#keded0e9]
サーバー利用券はニンテンドーアカウントごとに持つことができる、プチコン4 の作品共有用サーバーに接続する際に利用するチケットです。

サーバー利用券を持っていると、作品をアップロードするためのサーバー上の場所を持つことができます。また、1枚でもサーバー利用券を持っていれば、作品のダウンロードがいくつでもできるようになります。サーバー利用券だけを購入することもでき (500 円(税込) )、複数持っているとアップロードできる総数が追加されます (サーバー利用券 1 枚につき 10 スロット)。

サーバー利用券は、プチコン4 の利用券セットに付属しており、購入したニンテンドーアカウントに 1 枚が付与されます。同じ本体の別アカウントは、プチコン4 を起動して利用することができますが、サーバー利用券は持っていない状態となります。

サーバー利用券を持っていない場合、作品のアップロードはできず、ダウンロードは 8 時間に 1 回に制限されます。

** Q. サーバー利用券に期限はありますか? 使ったらなくなりますか? [#la38a167]
一度購入したサーバー利用券は無期限、回数無制限です。プチコン3号やBIGのゴールド会員権のような期限はありません。そして何回でも使えます。

** Q. サーバーにはいくらの容量までの作品をアップロードできますか? [#i8284676]
1 つのスロット (プロジェクト) につき、20 MB まで (プチコン3号や BIG のゴールド会員権と同じ) です。なお、プチコン4 では、DAT ファイルと GRP ファイルは保存時に自動で圧縮され、保存データが小さくなります。

** Q. プチコン4 を購入したけど、サーバー利用券がないと表示されます [#oe302abb]
サーバー利用券は、プチコン4 の利用券セットを購入したニンテンドーアカウントに付与されます。同じ本体のほかのアカウントで起動した場合は、サーバー利用券を持っていない状態ですので、そのアカウントでサーバー利用券 (500 円(税込) ) を購入する必要があります。

* はじめてのかた [#k71f1577]
** Q. 『メイドイン俺』やツクールシリーズみたいに、初心者でも簡単に何か作品を作ることができるの? [#y3681b66]
BASIC とはいえども立派なプログラミング言語の一種です。プログラミング言語の中では比較的簡単な部類ですが、一応簡単な (本当に簡単な) BASIC が大学センター試験の数学の問題として毎年出題されているほどのものです。『メイドイン俺』や『RPG ツクール』みたいに、そうそう簡単に覚えたり作ったりはできません。
 
が、プログラムの作り方を教えているサイトなどで段階を踏んで覚えていけば、最後には誰でも自由なゲーム・ツールのプログラムが書けるようになるでしょう。

2011 年の初代プチコン発売直後からすでに作品がぽつぽつ公開されていたのは、初期のプチコン購入者の大半が腕に覚えがあるおっさんだったからです。今時のパソコンで言うと、[[HSP:http://hsp.tv/]] 程度の難易度ではないかと思われます。

* プチコン3号からの引き継ぎ [#d51277ce]
** Q. プチコン4 を買った場合、プチコン3号で作成したデータは引き継げますか? [#l85a46a9]
プチコン4 にプチコン3号の公開キーを入力して、作品をダウンロードすることができます。ただし、互換性がないので、動作させるにはプチコン4 の仕様に合わせて修正が必要です。また、プチコン4 の公開キーをプチコン3号から利用することはできません。

** Q. プチコン3号以前に作ったプログラムは、プチコン4で動きますか? [#e81dd38d]
プチコン4 は、プチコン3号から引き継いでいる部分が多いですが、ハードウェアの仕様の違いによるものや、互換性よりも機能の拡張を優先している部分が多いため、互換性はなく、そのままではまず動きません。ある程度書き換えが必要ですが、作品が使っている機能によっては、わずかな修正で移植することも不可能ではありません。

また、プチコン3号のプログラムをプチコン4用に変換する[[プチコンバータ&gt;Toukou/PetitConverter]]を使うのも一つの方法です。

なお、プチコンmkII 以前との互換性は3号の時点でほとんど失われていますので、これについては%%諦めてください。%%
//このwikiにmkIIのプログラムを読み替えて実行するプログラムがあります。（すべての作品が動くわけではありませんが…）
プチコンmkIIのプログラムを3号用に変換する[[プチコンmkII at 3号&gt;3gou:Toukou/プチコンmkII_at3号]]があるので、それをさらにプチコン4用に変換することでもしかしたら動くかもしれません。

** Q. プチコン3号の公開キーから取り込んだGRPファイルが読み込めません。 [#h832cec1]
プチコン3号形式のGRPファイルは、
#basic(noline){{
LOADG &quot;DAT:ファイル名&quot;,読み込みたいページ名
}}
で読み込めます。なお、GRP はプチコン4 の &amp;basic{SAVEG}; 命令で保存しなおすと圧縮がかかるので、3号よりもかなりサイズを小さくできます。

* プチコンの操作 [#f28a1610]
** Q. コピーペーストしたいんですが、範囲選択ってどうやるの? [#x50c17d1]
以下のいずれかでできます。
- キーボードの Shift を押しながらカーソル移動
- ZL または ZR ボタンを押しながらカーソル移動
- マウスカーソルでドラッグ

** Q. 画面タッチで文字入力したいのですが、どうやったらキーボードが出ますか [#of072e66]
コントローラーの - ボタンや、キーボードの「メニューキー」を押すことで、ソフトキーボードの表示切り替えができます。

** Q. ソフトキーボードの場所を移動させる方法が分かりません [#e333bc76]
ソフトキーボードの右下の小さい○印をタッチするたびに、場所が移動します。

** Q. 漢字を含む文章を入力することはできますか? [#x0eda955]
プチコン4 には、ソフトキーボードに代表的な音読みの頭文字を入力して、漢字を探して入力する機能があります。また、サンプルプロジェクトの KNJTABLE (&amp;basic{LOAD ”#SAMPLE/KNJTABLE”};) に内のコメントにソフトキーボード同様の漢字一覧が書かれていて、コピペで利用できます。

USB キーボードから漢字を入力する機能は標準では搭載されていませんが、サーバーの作品一覧に「RMG IME」という便利な作品があります。これをダウンロードし、設定画面から「RMG_IME.PRG」を「スマイルボタン3」に登録します。すると、USB キーボードの F11 キーで漢字変換ができる画面があらわれ、スムーズに漢字を入力できるようになります。

** Q. 作品の保存はどれぐらいできますか? [#jd8f9302]
初期状態では、64 MB までです。本体の保存領域にセーブされます。容量が足りなくなった場合は、設定画面から、256 MB、512 MB の 2 段階に拡張できます。一度拡張すると、前の容量に戻すことはできません。また、どれぐらい保存しているかにかかわらず、現在確保している分の本体容量をつねに使用します。つまり、512 MB まで拡張すると、プチコン 4 のセーブデータは常に本体上に 512 MB + α の大きさで存在することとなります。

** Q. 本体の容量が足りません。作品を SD カードに保存することはできますか? [#s86d08e4]
できません。Nintendo Switch は、セーブデータは本体への保存のみに限定されています。これは穴をついての本体改造行為をさせないための設計のようです。

* 作品の公開・ダウンロード [#j25e3d16]
** Q. ほかの人の作品の公開キーはどこで手に入りますか? また、どこで自分の公開キーを晒せばいいですか? [#d4b99039]
このあたりで作品キーのやり取りが行われています。

- [[このWikiの投稿プログラムコーナー&gt;Toukou]]
- [[このWikiのプチコン4作品集&gt;WorksLink]]
- [[このWikiのOFコーナー&gt;OverFlow]] (作りかけのもの、テストプログラムなどを気軽に投稿してください)
- [[Twitter ハッシュタグ「#petitcom」&gt;ハッシュタグ:petitcom]]
- [[Twitter ハッシュタグ「#sbkey」&gt;ハッシュタグ:sbkey]] (公開キー付きツイートに付けるハッシュタグ)
- [[Petitverse プチコンコミュニティ:http://petitverse.hosiken.jp/community/petitcom/]] (本Wikiの管理人が運営する Miiverse 風掲示板)

** Q. ファイルや作品をアップロードして公開したけど、サーバーの作品一覧に並びません [#d3b3ca8e]
サーバーの作品一覧には、プロジェクトをアップロードした場合に並びます。ファイルを単独でアップロードした場合は、公開キーが発行されるのみで一覧には並びません。

//また、作品一覧は、いいねまたはダウンロード数の上位 120 作品までしか表示されません。そのため、アップロードしても一覧にはなかなか載りません。
作品の存在になかなか気付いてもらえない場合、アップロードしたことを知ってもらうには、以下のような方法があります。

- この Wiki の[[投稿プログラムコーナー&gt;Toukou]]に作品を投稿してみます。
- Twitter のハッシュタグ [[#sbkey&gt;ハッシュタグ:sbkey]] で作品の紹介をしてみます。
- この Wiki の [[OF コーナー&gt;OverFlow]] や [[Petitverse&gt;Board]] で作品の紹介をしてみます。

//新規の作品が埋もれてしまう件については、今後のアップデートで改善されることが予告されています。

** Q. ファイルをアップロードして公開キーを発行したいですが、サーバーの作品リストに並んでほしくないです [#oa1b77e2]
現時点では、プロジェクトではなく、プロジェクト内のファイル単体をアップロードすると、サーバーの作品一覧に並ぶことなく公開キーを発行できます。

** Q. 作品のユーザー名ってどうやって入力するのですか [#m96e615e]
作品をアップロードしたときに、本体のアカウントに設定されているユーザー名が自動的に作品のユーザー名に設定されます。

** Q. 作品公開にあたって見落としがちな注意事項はありますか [#publicNG]
問題が無さそうなのに『公開NG』になってしまったら確認した方がよさそうなこと
- プチコンと関係がないサイトのURLを書くことはNGとのことです
#tweet(https://twitter.com/notohoho/status/1206100603136380928)
- &amp;basic{METAEDIT}; 命令で編集できる『説明文』はあくまでも作品の説明を書く場所です
-- URLに限らずSNSのID等も『公開NG』の対象になります
#tweet(https://twitter.com/notohoho/status/1206725577329135617)

* 命令・機能 [#hb60f85e]
** Q. COLOR 命令を使用すると文字が表示されなくなってしまいます。 [#gc22431a]
プチコン4 の &amp;basic{COLOR}; 命令は、線や円の描画と同じように、32 ビットカラーで指定します。旧来の BASIC やプチコン3号 までのように、色を 0〜15 の値で指定すると「透明度がゼロの黒か限りなく暗い青」になり文字が見えなくなってしまいます。

&amp;basic{COLOR #C_BLUE}; のように、&amp;basic{#C_}; で始まる定数の色を使用したり、&amp;basic{COLOR RGB(255,255,255)}; のように、&amp;basic{RGB()}; 関数を使って色を指定してみてください。 

** Q. 過去のプチコンにあった BG ってなくなったんですか? [#z0efa99a]
BG は[[テキストスクリーン:https://sup4.smilebasic.com/doku.php?id=reference:%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E5%85%A5%E5%87%BA%E5%8A%9B]]に統合されました。テキストスクリーンとはまさに文字が表示されている部分ですが、今回は統合により、ゲームの背景やマップ表示にも使えます。

プチコン3号の BG は 4 画面、テキストスクリーンは 1 画面ありましたが、プチコン4 ではテキストスクリーンが 5 画面あります。そのすべてが、プチコン 3 号における BG とテキストスクリーン両方の機能を含有しています。

以下の違いだけで、基本的には BG と同じように使用することができます。

- BG 機能の呼び名がテキストスクリーンに変わったので、リファレンスマニュアルでもそちらを参照します。
- 命令名が「BG」で始まっていた BG 用命令は、テキストスクリーン用として「T」で始まる名前に変わっています。
- これまで同じ機能なのに、テキストと BG で命令が分かれていたものは、基本的にテキストの命令に機能統合されています。たとえば、&amp;basic{BGCLR}; は &amp;basic{CLS}; に。&amp;basic{BGCHK}; は &amp;basic{CHKCHR}; に統合されました。
- &amp;basic{TPRINT}; や &amp;basic{TINPUT}; などの命令で文字の表示ができます。
- BG におけるチップ番号 は 0〜4095 (ただし、1024 以降は繰り返しのため 1024 個分) だったのが、&amp;HE800〜&amp;HF7FF (4096 個分) になりました。0 から始まらないのは、テキスト用の文字もすべて表示できて、それらの文字とコードを共有しているためです。PRINT CHR$(&amp;HE880) のようにすると、テキストに混じってBGチップを表示することもできます。

#tweet(https://twitter.com/hosiken/status/1133762499872845824)

** Q. テキストスクリーンに CHR$(3号のBGチップ番号+&amp;HE800)を表示させても、3号と同じ絵が出てこないです [#qdd0d575]
プチコン4 では、テキストスクリーン(実質BG)の文字サイズが16x16 ドットの場合、BGチップの素材の範囲が拡大されました。3号の4倍である、4096枚扱え、画像素材のサイズは 1024x1024 となります。

しかし、デフォルトの BG 素材は3号と同じ配置で 512x512 のサイズで配置されているため、4 の番号の並びとは一致しておらず、そのままでは、チップ番号に &amp;HE800 を足しても 3号と同じチップが表示されません。

上記の説明がよくわからなくても構いません。とりあえず、以下のプログラムを自分のプログラムに組み込んで、ACLS 命令で画面クリアしたあとに実行しておくと、GCOPY 命令を使って標準の画像素材の BG がある部分を4基準に並び変えます。これにより、3号のチップ番号に &amp;HE800 を足すだけで絵が一致するようになります。
#basic{{
' GRP4 の BGの番号の並びをプチコン3号と同じにする
GTARGET 4
FOR I=0 TO 31
  GCOPY 1024,I*32+16,1024+511,I*32+31,1024+512,I*16,#G_NORMAL
  IF I&gt;0 THEN GCOPY 1024,I*32,1024+511,I*32+31,1024,I*16,#G_NORMAL
NEXT
GTARGET 0
}}

** Q. BGOFS を TOFS に置き換えたら、絵が逆に動きます [#f38342d8]
プチコン4 の TOFS 命令は『X座標が増えると右に移動』『Y座標が増えると下に移動』という挙動になっています。これは SPOFS 命令と同じ挙動です。

簡単な対処法は座標の数値にマイナスを付けることです。

** Q. グラフィック画面のページを GPAGE 命令で変えられないし、GOFS 命令で動かしたりもできません [#t14b1eb5]
グラフィック画面は 4095 番のスプライトになりました。4095 という数字は、&amp;basic{#GSPRITE}; という定数で定義されています。

4095 番のスプライトのほかとの違いは、画面の初期化時に、グラフィック画面として機能するように初期化がされることだけです。それ以外は完全にスプライトとして制御しほうだいで、あらためて設定し直してただのスプライトのひとつに変えてしまうこともできます。

また、同じようなスプライトを作ってグラフィック画面が複数面ある状態を作ることもできます。

したがって、これまでの命令は、以下のようにスプライトを操作して代替できます。
- グラフィック画面のページを変える (従来の &amp;basic{GPAGE};) → &amp;basic{SPPAGE #GSPRITE,ページ};
- グラフィック画面を動かす (従来の &amp;basic{GOFS};) → &amp;basic{SPOFS #GSPRITE,-X,-Y};
- グラフィック画面を非表示にする → &amp;basic{SPHIDE #GSPRITE};

** Q. グラフィック画面を動かすと領域外が切れてしまいます [#vcbe004a]
グラフィック画面のスプライトは、画面と同じ大きさで生成されます。そのため、SPOFS でずらしたりすると、画面外の部分は表示されません。これは、&amp;basic{SPCHR}; でスプライトを GRP と同じサイズまで広げることにより解決します。
#basic(noline){{
SPCHR #GSPRITE,0,0,2048,2048
}}
#basic(noline){{

' GRPの大きさ(2048X2048)は定数で定義されている
SPCHR #GSPRITE,0,0,#GRPWIDTH,#GRPHEIGHT
}}

** Q. ソフトウェアキーボードの表示、非表示を制御することはできますか? [#e5ad33ef]
#tweet(https://twitter.com/notohoho/status/1133303750536204288)

** Q. FREEMEM() で残りフリーメモリを見ていると、減っていく一方でいっこうに回復しません。 [#l6b3d3e2]
プチコン4 の仕様です。プチコン3号と違い、使わなくなったメモリはタイミングを見計らったときか、本当に足りなくなったときに、まとめて一気に解放されます。そのため、FREEMEM() は何をしても減っていく一方に見えますが、なくなりかけたら突然全回復するという動きをします。

** Q. スマイルツールで見られる画像素材の約 1500 番以降が使用できない。違う絵が出てくる。 [#v877a44e]
スマイルツールでは、デフォルトの画像素材に含まれる全ての絵の情報が登録されていますが、SPSET などで使用できる定義番号としては、1500 番ぐらいまでしか登録されていません。これは、定義番号の初期状態が、前作のプチコン3号と同じ状態になっているのが理由です。

スマイルツールで、画像素材を選択して X ボタンを押すと、SPDEF 命令の引数として使える情報をコピーして、どこかにペーストできます。しかし、1 つずつ行う必要があるため大変です。

スマイルツールで使用している素材の情報は #TOOL/DEFSP1.TXT にあり、どこからでもロードできます。これを利用して自分でひととおり定義してしまうという方法があります。
#tweet(https://twitter.com/hosiken/status/1140927983768571904)
#tweet(https://twitter.com/omusubi_p/status/1132270177934962688)

** Q. GAHAKU で描いた絵を保存すると 1MB ぐらいになって、セーブデータ領域を圧迫してしまいます。 [#vea2dbe7]
デフォルト素材の一部を書き換えてまるごと保存すると、大きくなってしまいます。SAVEG 命令に、画像の一部分を保存する機能があります。これを使って、書き換えていない部分を省くことにより、大幅にファイルサイズが小さくなります。

* サンプル [#i9389bd8]
** Q. サンプルの「KANJITBL」が起動しません [#tcd91b1f]
これは音読みの頭文字と漢字の一覧がコメントとして列挙されているファイルです。プログラムとしては動作せずにすぐに終了しますが、これは想定通りです。

** Q. 公式でサーバーに公開されているサンプルゲーム「クレイジードレドランド」で、ボスのじゃんけんに勝てません [#k400bd0b]
なんで負けたか、明日まで考えといてください。ボスのじゃんけんに勝つには、プログラムの中を読んで何か ZURU をしていないか確認する必要がありそうです。そしたら何かか見えてくるはずです。改造はしなくてよいです。
</textarea>
 </form>
</div>
<script>
// https://iwb.jp/javascript-form-onbeforeunload-alert/
var checkValue = document.querySelectorAll('.checkValue');
var submitBtn = document.querySelectorAll('.submitBtn');
var checkFlag = false;
var onBeforeunloadHandler = function(e) {
  var msg = 'このページから移動すると、編集中の内容は保存されません。';
  e.returnValue = msg;
};

var formAlert = function() {
  if(!checkFlag) {
    window.addEventListener('beforeunload', onBeforeunloadHandler);
    for(var i = 0; i < checkValue.length; i++) {
      checkValue[i].removeEventListener('input', formAlert);
      checkValue[i].removeEventListener('change', formAlert);
    }
    checkFlag = true;
  }
};
for(var i = 0; i < checkValue.length; i++) {
  checkValue[i].addEventListener('input', formAlert);
  checkValue[i].addEventListener('change', formAlert);
}
for(var i = 0; i < submitBtn.length; i++) {
  submitBtn[i].addEventListener('click', function() {
  window.removeEventListener('beforeunload', onBeforeunloadHandler);
});
}
</script><ul><li><a href="/petc4/?cmd=edit&amp;help=true&amp;page=FAQ">テキスト整形のルールを表示する</a></li></ul></div>

		</div></div>

	</div>

	<div id="block-pukiwiki-info">

<!-- Toolbar -->
<div id="toolbar">
 <a href="/petc4/?FrontPage"><img src="../sys/image/top.png" width="20" height="20" alt="トップ" title="トップ" /></a>
 &nbsp;
 	<a href="/petc4/?cmd=edit&amp;page=FAQ"><img src="../sys/image/edit.png" width="20" height="20" alt="編集" title="編集" /></a>	  <a href="/petc4/?cmd=diff&amp;page=FAQ"><img src="../sys/image/diff.png" width="20" height="20" alt="差分" title="差分" /></a>	<a href="/petc4/?cmd=backup&amp;page=FAQ"><img src="../sys/image/backup.png" width="20" height="20" alt="バックアップ" title="バックアップ" /></a>			<a href="/petc4/?plugin=attach&amp;pcmd=upload&amp;page=FAQ"><img src="../sys/image/file.png" width="20" height="20" alt="添付" title="添付" /></a>		<a href="/petc4/?plugin=template&amp;refer=FAQ"><img src="../sys/image/copy.png" width="20" height="20" alt="複製" title="複製" /></a>	<a href="/petc4/?plugin=rename&amp;refer=FAQ"><img src="../sys/image/rename.png" width="20" height="20" alt="名前変更" title="名前変更" /></a> <a href="/petc4/?FAQ"><img src="../sys/image/reload.png" width="20" height="20" alt="リロード" title="リロード" /></a> &nbsp;
	<a href="/petc4/?plugin=newpage&amp;refer=FAQ"><img src="../sys/image/new.png" width="20" height="20" alt="新規" title="新規" /></a> <a href="/petc4/?cmd=list"><img src="../sys/image/list.png" width="20" height="20" alt="一覧" title="一覧" /></a> <a href="/petc4/?cmd=search"><img src="../sys/image/search.png" width="20" height="20" alt="検索" title="検索" /></a> <a href="/petc4/?RecentChanges"><img src="../sys/image/recentchanges.png" width="20" height="20" alt="新着" title="新着" /></a> &nbsp; <a href="/petc4/?Help"><img src="../sys/image/help.png" width="20" height="20" alt="ヘルプ" title="ヘルプ" /></a> &nbsp; <a href="/petc4/?cmd=rss&amp;ver=1.0"><img src="../sys/image/rss.png" width="36" height="14" alt="最終更新のRSS" title="最終更新のRSS" /></a></div>

		<p id="pukiwiki-about">表示モード : [ <strong>スマホ・3DS対応表示</strong> | <a href="./setskin.php?mode=pc">クラシック表示</a> ]<br />
		<strong>PukiWiki 1.4.7</strong> Copyright &copy; 2001-2006 <a href="http://pukiwiki.sourceforge.jp/">PukiWiki Developers Team</a>. License is <a href="http://www.gnu.org/licenses/gpl.html">GPL</a>. Based on "PukiWiki" 1.3 by <a href="http://factage.com/yu-ji/">yu-ji</a><br />
		ページの処理時間 : 0.006 秒  | <a href="/petc4/?plugin=login">ログイン</a><br />
		Copyright(C) 2011-2019 プチコンまとめWiki</p>

	</div>

</div>

<script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-2091180-9']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();

</script>

</body>

</html>
